import{d as M,o as w,e as k,f as h,a2 as K,b as z,bx as O,bl as P,F as U,r as A,i as e,g as n,by as E,w as p,l as x,b5 as F,aX as N,m as R,aY as I,C as T,a as W,v as q,x as X,y as Y,a7 as G,c as H,S as J,z as Q}from"./index-9024e225.js";import{_ as Z}from"./InputNumber-c8e506f5.js";import{_ as tt}from"./Scrollbar-809f6fdb.js";import{_ as et}from"./Divider-9a4816ee.js";import{_ as nt}from"./FormItem-789fd7a2.js";import"./use-locale-e0e42d34.js";import"./use-form-item-6ca3f662.js";import"./Input-a6b3335d.js";import"./Button-84ebe945.js";import"./is-browser-fc34c9a6.js";import"./color-to-class-8578b472.js";import"./Remove-e340c02b.js";const ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},at=h("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M12 5v14"}),h("path",{d:"M5 12h14"})],-1),st=[at],L=M({name:"Plus",render:function(s,l){return w(),k("svg",ot,st)}}),lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},rt=K('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),it=[rt],D=M({name:"Trash",render:function(s,l){return w(),k("svg",lt,it)}});function B({data:o}){return o.length===0?0:z.sum(o)/o.length}function ut({data:o}){const s=B({data:o}),l=o.map(m=>(m-s)**2);return B({data:l})}function ct({data:o,headerMap:s={}}){if(!Array.isArray(o)||o.length===0)return"";const l=Object.keys(o[0]),m=o.map(_=>Object.values(_)),f=`| ${l.map(_=>s[_]??_).join(" | ")} |`,i=`| ${l.map(()=>"---").join(" | ")} |`,$=m.map(_=>`| ${_.join(" | ")} |`).join(`
`);return`${f}
${i}
${$}`}const pt=M({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(o,{emit:s}){const l=o,m=s,f=O(),i=P(l,"values",m);async function $(){i.value.push(null),await F(),f.value.at(-1)?.focus()}function _(y){if(y===i.value.length-1){$();return}f.value.at(y+1)?.focus()}return(y,a)=>{const t=N,r=R,b=I;return w(),k("div",null,[(w(!0),k(U,null,A(n(i),(g,v)=>(w(),k("div",{key:v,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[e(n(Z),{ref_for:!0,ref:n(f).set,value:n(i)[v],"onUpdate:value":u=>n(i)[v]=u,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:E(u=>_(v),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),e(b,{tooltip:"Delete this value"},{default:p(()=>[e(r,{circle:"",variant:"text",onClick:u=>n(i).splice(v,1)},{default:p(()=>[e(t,{component:n(D),depth:"3",size:"18"},null,8,["component"])]),_:1},8,["onClick"])]),_:2},1024)]))),128)),e(r,{onClick:$},{default:p(()=>[e(t,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),a[0]||(a[0]=x(" Add a measure ",-1))]),_:1})])}}}),mt={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},_t={flex:"","justify-center":""},dt={style:{flex:"0 0 100%"}},ft={style:{"max-width":"600px",margin:"0 auto"}},vt={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},ht={"mt-5":"",flex:"","justify-center":"","gap-3":""},Ut=M({__name:"benchmark-builder",setup(o){const s=T("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),l=T("benchmark-builder:unit",""),m=a=>Math.round(a*1e3)/1e3,f=W(()=>s.value.map(({data:a,title:t})=>{const r=a.filter(z.isNumber);return{title:t,size:r.length,mean:B({data:r}),variance:ut({data:r})}}).sort((a,t)=>a.mean-t.mean).map(({mean:a,variance:t,size:r,title:b},g,v)=>{const u=l.value.trim(),d=v[0].mean,j=a-d,S=d===0?"∞":m(a/d),c=g!==0&&d!==a?` (+${m(j)}${u} ; x${S})`:"";return{position:g+1,title:b,mean:`${m(a)}${u}${c}`,variance:`${m(t)}${u}${u?"²":""}`,size:r}})),{copy:i}=q({createToast:!1}),$={position:"Position",title:"Suite",size:"Samples",mean:"Mean",variance:"Variance"};function _(){i(ct({data:f.value,headerMap:$}))}function y(){const a=f.value.flatMap(({title:t,...r})=>[` - ${t}`,...Object.entries(r).map(([b,g])=>`    - ${$[b]??b}: ${g}`)]).join(`
`);i(a)}return(a,t)=>{const r=Y,b=et,g=nt,v=Q,u=N,d=R,j=tt,S=G;return w(),k(U,null,[e(j,{style:{flex:"1"},"x-scrollable":""},{default:p(()=>[h("div",mt,[(w(!0),k(U,null,A(n(s),(c,V)=>(w(),k("div",{key:V},[e(v,{style:{width:"294px"}},{default:p(()=>[e(r,{value:c.title,"onUpdate:value":C=>c.title=C,"label-position":"left",label:"Suite name",placeholder:"Suite name...",clearable:""},null,8,["value","onUpdate:value"]),e(b),e(g,{label:"Suite values","show-feedback":!1},{default:p(()=>[e(pt,{values:c.data,"onUpdate:values":C=>c.data=C},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),h("div",_t,[n(s).length>1?(w(),H(d,{key:0,variant:"text",onClick:C=>n(s).splice(V,1)},{default:p(()=>[e(u,{component:n(D),depth:"3","mr-2":"",size:"18"},null,8,["component"]),t[4]||(t[4]=x(" Delete suite ",-1))]),_:1},8,["onClick"])):J("",!0),e(d,{variant:"text",onClick:C=>n(s).splice(V+1,0,{data:[0],title:`Suite ${n(s).length+1}`})},{default:p(()=>[e(u,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),t[5]||(t[5]=x(" Add suite ",-1))]),_:1},8,["onClick"])])]))),128))])]),_:1}),h("div",dt,[h("div",ft,[h("div",vt,[e(r,{value:n(l),"onUpdate:value":t[0]||(t[0]=c=>X(l)?l.value=c:null),placeholder:"Unit (eg: ms)",label:"Unit","label-position":"left","mb-4":""},null,8,["value"]),e(d,{onClick:t[1]||(t[1]=c=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:p(()=>[...t[6]||(t[6]=[x(" Reset suites ",-1)])]),_:1})]),e(S,{data:n(f),headers:$},null,8,["data"]),h("div",ht,[e(d,{onClick:t[2]||(t[2]=c=>_())},{default:p(()=>[...t[7]||(t[7]=[x(" Copy as markdown table ",-1)])]),_:1}),e(d,{onClick:t[3]||(t[3]=c=>y())},{default:p(()=>[...t[8]||(t[8]=[x(" Copy as bullet list ",-1)])]),_:1})])])])],64)}}});export{Ut as default};
